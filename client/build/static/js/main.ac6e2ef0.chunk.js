(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(e,t,n){e.exports=n(153)},118:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),o=n.n(l),c=n(55),i=(n(117),n(118),n(12)),s=n(13),u=n(15),d=n(14),m=n(47),p=n(17),f=n(195),h=n(199),y=n(53);function g(){return r.a.createElement(f.a,{style:{position:"sticky",top:0},fixed:!0,position:"static"},r.a.createElement(h.a,{className:"header",style:{display:"flex",marginRight:20,flex:1,justifyContent:"space-between"}},r.a.createElement(y.a,{className:"head1",variant:"h5"},"U Coin"),r.a.createElement(y.a,{className:"head2",variant:"h8"},"Simple BlockChain Based Cryptocurrency")))}var v=n(7),E=n.n(v),b=n(16),x=n(90),w=n.n(x),S=n(206),k=n(207),j=n(209),C=n(208),O=n(200),T=n(217),R=n(205),B=n(59),D=n(220),P=n(204),L=n(202),A=n(203),N=n(201);function q(e){var t=r.a.useState(e.open),n=Object(B.a)(t,2),l=n[0],o=n[1],c=r.a.useState(!1),i=Object(B.a)(c,2),s=i[0],u=i[1];Object(a.useEffect)((function(){o(e.open)}));var d=function(){e.handleClose&&e.handleClose(),o(!1),e.history.replace("/login")},m=function(){var t=Object(b.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=7;break}return u(!0),t.next=4,e.resendEmail();case 4:n=t.sent,console.log(n),"sent"==n?(u(!1),o(!1),alert("Email Resent!"),e.handleClose()):(o(!1),e.handleClose(),u(!1),alert(n));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(D.a,{open:l,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(N.a,{id:"alert-dialog-title"},e.title),r.a.createElement(L.a,null,r.a.createElement(A.a,{id:"alert-dialog-description"},e.discription)),r.a.createElement(P.a,null,e.resend?r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{onClick:d,color:"primary"},"Login"),r.a.createElement(O.a,{onClick:m,color:"primary"},"Resend Link?")):r.a.createElement(O.a,{onClick:d,color:"primary"},"Login"),function(){if(s)return r.a.createElement("div",null,"Resending...")}())))}var K=new m.a,I=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={username:null,password:null,clicked:!1,error:null,resendPassword:null},e.renderButton=function(){return e.state.clicked?r.a.createElement("center",null,r.a.createElement(R.a,null)):r.a.createElement(O.a,{type:"sumbit",onSubmit:e.handleLogin,size:"small",color:"primary"},"Login")},e.handleLogin=function(){var t=Object(b.a)(E.a.mark((function t(n){var a,r,l,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.setState({clicked:!0}),"/auth/login",a=e.state,r=a.email,l=a.password,t.prev=4,t.next=7,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:l})});case 7:return o=t.sent,t.next=10,o.json();case 10:o=t.sent,K.set("publicKey",o.publicKey),"success"==o.login?w.a.toDataURL(o.publicKey,(function(t,n){localStorage.setItem("qrcode",String(n)),localStorage.setItem("publicKey",o.publicKey),e.props.history.replace("/dashboard",{state:{publicKey:o.publicKey}})})):o.verified?e.setState({clicked:!1,alert:!0,discription:o.verified,resendPassword:e.state.password}):(e.setState({clicked:!1,error:o.error}),console.log(o.error)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),e.setState({clicked:!1,error:"error"}),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e){return t.apply(this,arguments)}}(),e.resend=Object(b.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/auth/resendVerification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.resendPassword})});case 2:return n=t.sent,t.next=5,n.json();case 5:if(!(n=t.sent).msg){t.next=10;break}return t.abrupt("return","sent");case 10:return t.abrupt("return",n.error);case 11:case"end":return t.stop()}}),t)}))),e}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("center",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:10}},r.a.createElement(q,{resendEmail:this.resend,resend:!0,handleClose:function(){return e.setState({alert:!1})},history:this.props.history,discription:this.state.discription,open:this.state.alert}),r.a.createElement(S.a,null,r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,{gutterBottom:!0,variant:"h5",component:"h2"},"U Coin"),r.a.createElement(y.a,{variant:"body2",color:"textSecondary",component:"p"},"U Coin is the simplest implementation of blockchain technology"))),r.a.createElement(j.a,null,r.a.createElement(y.a,{style:{justifyContent:"center",display:"flex",flexDirection:"column",width:"100%"}},r.a.createElement("form",{onSubmit:this.handleLogin,style:{display:"flex",flexDirection:"column",marginLeft:20,marginRight:20,justifyContent:"center"},required:!0,autoComplete:"off"},r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({email:t.target.value})},type:"email",id:"standard-basic",label:"Email"}),r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({password:t.target.value})},type:"password",id:"standard-basic",label:"Password"}),r.a.createElement(y.a,{style:{color:"red",marginTop:10}},this.state.error),this.renderButton()))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},"Dont Have an Account?"),r.a.createElement(O.a,{style:{marginTop:10},onClick:function(){return e.props.history.push("/register")},size:"small",color:"primary"},"Sign Up")))),r.a.createElement(O.a,{onClick:function(){return e.props.history.push("/forgotPassword")},style:{marginTop:20},color:"primary",variant:"contained"},"Forgot Password?"))}}]),n}(r.a.Component),F=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={clicked:!1,name:null,password:null,email:null,msg:null,alert:!1},e.onRegister=function(){var t=Object(b.a)(E.a.mark((function t(n){var a,r,l,o,c,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a="/auth/registerUser",r=e.state,l=r.name,o=r.email,c=r.password,!(l&&o&&c)){t.next=23;break}if(e.setState({clicked:!0}),!(c.length<6)){t.next=8;break}return e.setState({clicked:!1}),t.abrupt("return",e.setState({msg:"Password length must be greater than 6"}));case 8:return t.prev=8,t.next=11,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:c,name:l})});case 11:return i=t.sent,console.log(i),t.next=15,i.json();case 15:null!=(i=t.sent).registration?e.setState({clicked:!1,alert:!0,discription:i.registration}):(console.log(i.error),e.setState({clicked:!1,msg:i.error})),console.log(i),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(8),console.log("error");case 23:case"end":return t.stop()}}),t,null,[[8,20]])})));return function(e){return t.apply(this,arguments)}}(),e.renderButton=function(){return e.state.clicked?r.a.createElement("center",null,r.a.createElement(R.a,null)):r.a.createElement(O.a,{type:"sumbit",onSubmit:e.onRegister,size:"small",color:"primary"},"Register")},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("center",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:10}},r.a.createElement(S.a,null,r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,{gutterBottom:!0,variant:"h5",component:"h2"},"U Coin"),r.a.createElement(y.a,{variant:"body1",color:"textSecondary",component:"p"},"Registration"))),r.a.createElement(j.a,null,r.a.createElement(y.a,{style:{justifyContent:"center",display:"flex",flexDirection:"column",width:"100%"}},r.a.createElement("form",{onSubmit:this.onRegister,style:{display:"flex",flexDirection:"column",marginLeft:20,marginRight:20,justifyContent:"center"},required:!0,autoComplete:"off"},r.a.createElement(T.a,{onChange:function(t){return e.setState({name:t.target.value})},type:"text",id:"standard-basic",autoComplete:"off",required:!0,label:"Name"}),r.a.createElement(T.a,{onChange:function(t){return e.setState({email:t.target.value})},required:!0,type:"email",id:"standard-basic",autoComplete:"off",label:"Email"}),r.a.createElement(T.a,{onChange:function(t){return e.setState({password:t.target.value})},required:!0,type:"password",id:"standard-basic",autoComplete:"off",label:"Password"}),r.a.createElement(this.renderButton,null),r.a.createElement(q,{title:"Registered Successfully",discription:this.state.discription,open:this.state.alert,history:this.props.history})),r.a.createElement("center",null,r.a.createElement("div",{style:{width:200,display:"flex",justifyContent:"center"}},r.a.createElement("span",{style:{color:"red",marginTop:5}},this.state.msg))))),r.a.createElement(j.a,{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},"Already Have an Account?"),r.a.createElement(O.a,{onClick:function(){return e.props.history.replace("/login")},style:{marginTop:10},size:"small",color:"primary"},"Login")))))}}]),n}(r.a.Component),J=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={email:null,clicked:!1,alert:!1},e.renderButton=function(){return e.state.clicked?r.a.createElement("center",null,r.a.createElement(R.a,null)):r.a.createElement(O.a,{type:"sumbit",onSubmit:e.handleForgot,size:"small",color:"primary"},"Submit")},e.handleForgot=function(){var t=Object(b.a)(E.a.mark((function t(n){var a,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.setState({clicked:!0}),"/auth/forgetPassword",a=e.state.email,t.prev=4,t.next=7,fetch("/auth/forgetPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})});case 7:return r=t.sent,t.next=10,r.json();case 10:r=t.sent,console.log(r),e.setState({clicked:!1,alert:!0}),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),e.setState({clicked:!1}),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("center",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:10}},r.a.createElement(q,{title:"Email sent!",handleClose:function(){return e.setState({alert:!1})},history:this.props.history,discription:"If this email is in our records then you will recieve a link to reset your password via email",open:this.state.alert}),r.a.createElement(S.a,null,r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Forgot Password"),r.a.createElement(y.a,{variant:"body2",color:"textSecondary",component:"p"},"Enter the Email associated with your account to get password reset link"))),r.a.createElement(j.a,null,r.a.createElement(y.a,{style:{justifyContent:"center",display:"flex",flexDirection:"column",width:"100%"}},r.a.createElement("form",{onSubmit:this.handleForgot,style:{display:"flex",flexDirection:"column",marginLeft:20,marginRight:20,justifyContent:"center"},required:!0,autoComplete:"off"},r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({email:t.target.value})},type:"email",id:"standard-basic",label:"Email"}),r.a.createElement(y.a,{style:{color:"red",marginTop:10}}),this.renderButton()))))))}}]),n}(r.a.Component),W=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).componentDidMount=function(){var t=e.props.history.location.search,n=String(t.split("?token=")[1]);fetch("/auth/verifyToken?token=".concat(n)).then((function(e){return e.json()})).then((function(t){return t.msg?e.setState({token:n}):e.props.history.replace("/login")}))},e.state={email:null,clicked:!1,alert:!1},e.renderButton=function(){return e.state.clicked?r.a.createElement("center",null,r.a.createElement(R.a,null)):r.a.createElement(O.a,{type:"sumbit",onSubmit:e.handleForgot,size:"small",color:"primary"},"Submit")},e.handleReset=function(){var t=Object(b.a)(E.a.mark((function t(n){var a,r,l,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.state.password!=e.state.password2){t.next=22;break}return e.setState({error:null}),e.setState({clicked:!0}),"/auth/resetPassword",a=e.state,r=a.password,l=a.token,t.prev=6,t.next=9,fetch("/auth/resetPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r,token:l})});case 9:return o=t.sent,t.next=12,o.json();case 12:o=t.sent,console.log(o),o.msg?e.setState({clicked:!1,alert:!0}):e.setState({clicked:!1,error:o.error}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),e.setState({clicked:!1,error:o.error});case 20:t.next=23;break;case 22:e.setState({error:"Passwords not match"});case 23:case"end":return t.stop()}}),t,null,[[6,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return this.state.token?r.a.createElement("center",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:10}},r.a.createElement(q,{title:"Password Changed!",handleClose:function(){return e.setState({alert:!1})},history:this.props.history,discription:"You can login Now",open:this.state.alert}),r.a.createElement(S.a,null,r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Forgot Password"),r.a.createElement(y.a,{variant:"body2",color:"textSecondary",component:"p"},"Type New Password"))),r.a.createElement(j.a,null,r.a.createElement(y.a,{style:{justifyContent:"center",display:"flex",flexDirection:"column",width:"100%"}},r.a.createElement("form",{onSubmit:this.handleReset,style:{display:"flex",flexDirection:"column",marginLeft:20,marginRight:20,justifyContent:"center"},required:!0,autoComplete:"off"},r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({password:t.target.value,error:null})},type:"password",id:"standard-basic",label:"New Password"}),r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({password2:t.target.value,error:null})},type:"password",id:"standard-basic",label:"Confirm Password"}),r.a.createElement(y.a,{style:{color:"red",marginTop:10}},this.state.error),this.renderButton())))))):r.a.createElement("div",null,"Redirecting...")}}]),n}(r.a.Component),z=n(91),U=n.n(z),G=n(92),Q=n.n(G),M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={verification:null},e.componentDidMount=Object(b.a)(E.a.mark((function t(){var n,a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.location,t.prev=1,t.next=4,fetch("".concat(n.pathname).concat(n.search));case 4:return a=t.sent,t.next=7,a.json();case 7:a=t.sent,console.log(a),a.verification?e.setState({verification:!0}):e.setState({verification:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),e.setState({verification:"failed"});case 15:case"end":return t.stop()}}),t,null,[[1,12]])}))),e}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return 1==this.state.verification?r.a.createElement("div",{style:{display:"flex",marginTop:200,flex:1,flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center"}},r.a.createElement(U.a,{style:{color:"green",fontSize:40}}),r.a.createElement("h4",{style:{marginBottom:20,marginTop:20}},"Verified Successfully!"),r.a.createElement(O.a,{onClick:function(){return e.props.history.replace("/login")},variant:"contained",color:"primary"},"Log In!")):0==this.state.verification?r.a.createElement("div",{style:{display:"flex",marginTop:200,flex:1,flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center"}},r.a.createElement(Q.a,{style:{color:"red",fontSize:40}}),r.a.createElement("h4",{style:{marginTop:20}},"verification Failed.."),r.a.createElement(O.a,{style:{marginTop:20},onClick:function(){return e.props.history.replace("/login")},variant:"contained",color:"primary"},"Log In!")):r.a.createElement("div",{style:{display:"flex",marginTop:200,flex:1,flexDirection:"column",height:"100%",justifyContent:"center",alignItems:"center"}},r.a.createElement(R.a,null),r.a.createElement("h4",{style:{marginTop:20}},"Verifying...."))}}]),n}(r.a.Component),H=n(211),V=n(104),Y=n(218),$=n(212),_=n(93),X=n.n(_),Z=n(95),ee=n.n(Z),te=n(94),ne=n.n(te);window.outerWidth;var ae=Object(H.a)({root:{flexGrow:1}});var re=Object(p.f)((function(e){var t=ae(),n=r.a.useState(0),a=Object(B.a)(n,2),l=a[0],o=a[1],c={0:"dashboard",2:"account",1:"wallet"};return r.a.createElement(V.a,{className:t.root,style:{backgroundColor:"black"}},r.a.createElement(Y.a,{value:l,onChange:function(t,n){o(n),e.history.replace("/".concat(c[n]))},indicatorColor:"Secondary",style:{color:"white"}},r.a.createElement($.a,{label:"Dashboard",icon:r.a.createElement(X.a,null)}),r.a.createElement($.a,{label:"Wallet",icon:r.a.createElement(ne.a,null)}),r.a.createElement($.a,{label:"Account",icon:r.a.createElement(ee.a,null)})))})),le=new m.a,oe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={amount:0,password:null,recipient:null,error:null,txn:null,balance:null,verified:!1,finalTxn:null},e.componentDidMount=function(){if(!le.get("exp_session"))return e.props.history.replace("/login");var t=le.get("publicKey");e.setState({publicKey:t,qrcode:localStorage.getItem("qrcode")})},e.showBalance=Object(b.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({balance:"Loading..."}),t.next=3,fetch("/getBalance",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({address:e.state.publicKey})});case 3:return n=t.sent,t.next=6,n.json();case 6:n=t.sent,e.setState({balance:n.Balance});case 8:case"end":return t.stop()}}),t)}))),e.renderBalance=function(){return null!=e.state.balance?r.a.createElement("center",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flex:1}},r.a.createElement("h2",null,"Balance"),r.a.createElement("h2",null,"$",e.state.balance))):"loading"==e.state.balance?r.a.createElement("div",null,"Loading..."):void 0},e.sendit=function(){var t=Object(b.a)(E.a.mark((function t(n){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({verified:!1,txn:null}),n.preventDefault(),t.next=4,fetch("/register-broadcast-transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.state.txn)});case 4:return a=t.sent,t.next=7,a.json();case 7:(a=t.sent).error?e.setState({finalTxn:a.error}):e.setState({finalTxn:a.sent});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.generate=function(){var t=Object(b.a)(E.a.mark((function t(n){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.setState({finalTxn:null}),t.next=4,fetch("/generateTxn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:e.state.publicKey,password:e.state.password,amount:e.state.amount,recipient:e.state.recipient})});case 4:return a=t.sent,t.next=7,a.json();case 7:a=t.sent,console.log(a),"failed"==a.auth&&fetch("/auth/logout").then((function(t){return e.props.history.replace("/login")})).catch((function(e){return null})),a.error?e.setState({error:a.error}):e.setState({txn:a,verified:!0,error:"Your Transaction is Valid"});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderSendButton=function(){if(e.state.verified)return r.a.createElement(O.a,{onClick:e.sendit,color:"primary"},"Send it!")},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("center",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:20,flexDirection:"column",flex:1,padding:10}},r.a.createElement("div",{style:{display:"flex",wordBreak:"break-all",margin:5,flexDirection:"column",justifyContent:"center",flex:1}},r.a.createElement("img",{style:{height:150,width:150},alt:"tusa",src:this.state.qrcode}),r.a.createElement("p",null,"Your Wallet Address is"),r.a.createElement("p",null,this.state.publicKey)),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(O.a,{onClick:this.showBalance,size:"small",color:"primary"},"Show Balance"),r.a.createElement(O.a,{onClick:function(){return fetch("/auth/logout").then((function(t){return e.props.history.replace("/login")}))},size:"small",color:"primary"},"Logout")),this.renderBalance(),r.a.createElement("form",{onSubmit:this.generate,style:{width:200,display:"flex",flexDirection:"column",marginLeft:20,marginRight:20,justifyContent:"center"},required:!0,autoComplete:"off"},r.a.createElement(T.a,{onChange:function(t){return e.setState({recipient:t.target.value})},type:"text",id:"standard-basic",label:"Recevier address"}),r.a.createElement(T.a,{onChange:function(t){return e.setState({amount:t.target.value})},type:"number",id:"standard-basic",label:"Amount"}),r.a.createElement(T.a,{onChange:function(t){return e.setState({password:t.target.value})},type:"password",id:"standard-basic",label:"Transaction password"}),r.a.createElement(O.a,{type:"submit",color:"primary"},"Generate Txn!")),this.state.error,this.renderSendButton(),this.state.finalTxn))}}]),n}(r.a.Component),ce=n(100),ie=n.n(ce),se=n(101),ue=n.n(se),de=n(210),me=n(213),pe=n(216),fe=n(215),he=n(214),ye=n(97),ge=n.n(ye),ve=n(96),Ee=n.n(ve),be=n(98),xe=n.n(be),we=(new Date,function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={data:null,refresh:!1},e.componentDidMount=function(){console.log(e.state.data),e.fetchTransactions()},e.fetchTransactions=Object(b.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/getTransactions");case 3:return n=t.sent,t.next=6,n.json();case 6:n=t.sent,console.log(n),e.setState({data:n}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.decide=function(e){return"received"==e?r.a.createElement(Ee.a,{style:{color:"green"}}):"sent"==e?r.a.createElement(ge.a,{style:{color:"red"}}):r.a.createElement(xe.a,null)},e.RenderList=function(){var t=e.state.data;return t?(t=JSON.parse(t)).map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{alignItems:"flex-start"},r.a.createElement(he.a,null,e.decide(t.type)),r.a.createElement(fe.a,{primary:r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h4",null,t.data.name),r.a.createElement("h4",null,"$",t.data.amount)),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"span",variant:"body2",style:{display:"inline"},color:"textPrimary"},t.data.timestamp))})),r.a.createElement(pe.a,{variant:"inset",component:"li"}))})):r.a.createElement("div",null,"Loading...")},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"sticky",bottom:72,display:"flex",flexDirection:"column",justifyContent:"center",height:400,marginBottom:40}},r.a.createElement("center",null,r.a.createElement("h5",{style:{marginTop:10,borderRadius:20,backgroundColor:"lightgreen",width:150}},"Transactions:")),r.a.createElement("div",{className:"list"},r.a.createElement(de.a,{style:{width:"100%",maxWidth:360}},r.a.createElement(this.RenderList,null))))}}]),n}(r.a.Component)),Se=n(99),ke=n.n(Se),je=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).renderQR=function(){if(a.state.renderQR)return r.a.createElement("center",null,r.a.createElement("h6",{style:{backgroundColor:"lightgreen",borderRadius:10,maxWidth:"50%"}},"Ask sender to scan this code "),r.a.createElement("img",{src:localStorage.getItem("qrcode"),style:{width:150,height:150}}),r.a.createElement("br",null),r.a.createElement(O.a,{onClick:function(){return a.setState({showKey:"Show Address"==a.state.showKey?"Hide":"Show Address"})},variant:"contained",color:"primary"},a.state.showKey),a.renderPublicKey())},a.componentDidMount=function(){a.showBalance()},a.renderPublicKey=function(){if("Hide"==a.state.showKey)return r.a.createElement("div",null,r.a.createElement("div",{style:{flexDirection:"column",wordBreak:"break-all",display:"flex",marginLeft:10,marginRight:10}},r.a.createElement("h6",null,localStorage.getItem("publicKey")),r.a.createElement(ke.a,{onClick:function(){window.navigator.clipboard.writeText(localStorage.getItem("publicKey")).then((function(e){a.setState({color:"green",isCopied:"Copied To ClipBoard"})}))},style:{color:a.state.color},fontSize:"18"}),a.state.isCopied))},a.refresh=function(){a.showBalance(),a.child.current.fetchTransactions()},a.showBalance=Object(b.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({balance:"Loading.."}),t=localStorage.getItem("publicKey"),e.next=4,fetch("/getBalance",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({address:t})});case 4:return n=e.sent,e.next=7,n.json();case 7:if(n=e.sent,console.log(n),"failed"!=n.auth){e.next=15;break}return console.log("failed"),e.next=13,fetch("/auth/logout");case 13:e.sent,a.props.history.replace("/login");case 15:a.setState({balance:n.Balance});case 16:case"end":return e.stop()}}),e)}))),a.state={balance:"",showKey:"Show Address",renderQR:!1,receive:"Receive",color:null,refresh:!1},a.child=r.a.createRef(),a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",width:"100%",marginTop:20,justifyContent:"space-around",alignItems:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("div",{onClick:function(){return e.props.history.push("/send")},style:{display:"flex",borderRadius:70,backgroundColor:"#007bff",width:70,height:70,alignItems:"center",justifyContent:"center"}},r.a.createElement(ie.a,{style:{fontSize:50,color:"white"}})),r.a.createElement("h4",{style:{marginTop:5}},"Send")),r.a.createElement("div",null,r.a.createElement("h4",null,"Balance",r.a.createElement("br",null),r.a.createElement("center",null,"$",this.state.balance))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("div",{onClick:function(){return e.setState({renderQR:!e.state.renderQR,receive:"Receive"==e.state.receive?"hide":"Receive"})},style:{display:"flex",borderRadius:70,backgroundColor:"#007bff",width:70,height:70,alignItems:"center",justifyContent:"center"}},r.a.createElement(ue.a,{style:{fontSize:50,color:"white"}})),r.a.createElement("h4",{style:{marginTop:5}},this.state.receive))),r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement(O.a,{onClick:this.refresh,variant:"contained",color:"primary"},"Refresh"))),r.a.createElement("div",{style:{marginTop:10}},this.renderQR()),r.a.createElement("div",null,r.a.createElement("center",null),r.a.createElement(we,{ref:this.child})))}}]),n}(r.a.Component),Ce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,"This is accout screen")}}]),n}(r.a.Component),Oe=n(102),Te=n.n(Oe),Re=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={result:"No result"},e.handleScan=function(t){t&&(e.setState({data:t}),e.setState({clicked:!1}))},e.handleGenerateTxn=function(){var t=Object(b.a)(E.a.mark((function t(n){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.tclicked){t.next=12;break}return n.preventDefault(),e.setState({finalTxn:null,tclicked:!0,error:null}),t.next=5,fetch("/generateTxn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.state.password,amount:e.state.amount,recipient:e.state.data,receiver:e.state.receiver,sendername:e.state.sendername})});case 5:return a=t.sent,t.next=8,a.json();case 8:a=t.sent,console.log(a),"failed"==a.auth&&fetch("/auth/logout").then((function(t){return e.props.history.replace("/login")})).catch((function(e){return null})),a.error?e.setState({error:a.error,tclicked:!1}):e.setState({txn:a,verified:!0,error:"Transaction Generated!",tclicked:!1});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.Send=Object(b.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({error:null,sclicked:!0}),t.next=3,fetch("/register-broadcast-transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.state.txn)});case 3:return n=t.sent,t.next=6,n.json();case 6:(n=t.sent).error?e.setState({finalTxn:n.error,txn:null,sclicked:!1}):e.setState({finalTxn:n.sent,txn:null,sclicked:!1});case 8:case"end":return t.stop()}}),t)}))),e.renderSendButton=function(){return e.state.finalTxn?r.a.createElement("center",null,r.a.createElement("h4",null,e.state.finalTxn)):e.state.verified?e.state.sclicked?r.a.createElement("center",null,r.a.createElement(R.a,null)):r.a.createElement("center",null,r.a.createElement(O.a,{onClick:e.Send,variant:"contained",color:"secondary"},"Send!")):void 0},e.renderButton=function(){return e.state.tclicked?r.a.createElement("center",null,r.a.createElement(R.a,null)):r.a.createElement(O.a,{type:"submit",onSubmit:e.handleGenerateTxn},"Generate Txn")},e.renderForm=function(){if(!e.state.data&&!e.state.clicked)return r.a.createElement("center",null,r.a.createElement("div",{style:{mrginTop:20}},r.a.createElement("h4",{style:{marginTop:40}},"Paste the receiver's address below or Scan the QR Code"),r.a.createElement("div",{style:{marginTop:30,display:"flex",flexDirection:"column",width:"50%",height:150}},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.setState({data:e.state.recipient})}},r.a.createElement(T.a,{onChange:function(t){return e.setState({recipient:t.target.value})},type:"text",placeholder:"Receiver's address"}),r.a.createElement("br",null),r.a.createElement(O.a,{type:"submit",onSubmit:function(t){t.preventDefault(),e.setState({data:e.state.recipient})},style:{marginTop:20,width:100},variant:"contained",color:"primary"},"Submit")))))},e.renderError=function(){return r.a.createElement("center",null,r.a.createElement("h4",{style:{marginTop:10}},e.state.error))},e.renderReader=function(){if(e.state.clicked)return r.a.createElement("div",{style:{display:"flex",height:200,justifyContent:"center",marginTop:30}},r.a.createElement(Te.a,{delay:300,onError:e.handleError,onScan:e.handleScan,style:{width:300}}))},e.renderSubmit=function(){if(e.state.data)return r.a.createElement("div",{style:{marginTop:20,display:"flex",justifyContent:"center",marginRight:20,marginLeft:20}},r.a.createElement("center",null,r.a.createElement(S.a,null,r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(y.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Generate Transaction"),r.a.createElement(y.a,{style:{wordBreak:"break-word"},variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("h5",null,"Reciever"),": ",e.state.data))),r.a.createElement(j.a,null,r.a.createElement(y.a,{style:{justifyContent:"center",display:"flex",flexDirection:"column",width:"100%"}},r.a.createElement("form",{onSubmit:e.handleGenerateTxn,style:{display:"flex",flexDirection:"column",marginLeft:20,marginRight:20,justifyContent:"center"},required:!0,autoComplete:"off"},r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({sendername:t.target.value})},type:"text",id:"standard-basic",label:"Your name"}),r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({amount:t.target.value})},type:"number",id:"standard-basic",label:"Amount"}),r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({receiver:t.target.value})},type:"text",id:"standard-basic",label:"Receiver's name"}),r.a.createElement(T.a,{required:!0,onChange:function(t){return e.setState({password:t.target.value})},type:"password",id:"standard-basic",label:"Password"}),r.a.createElement(y.a,{style:{color:"red",marginTop:10}}),e.renderButton()))))))},e.renderScan=function(){if(!e.state.data)return r.a.createElement("center",null,r.a.createElement("div",{style:{position:"fixed",bottom:0,marginBottom:100,right:0,left:0}},r.a.createElement(O.a,{style:{marginTop:20},onClick:function(){return e.setState({clicked:!e.state.clicked})},variant:"contained",color:"secondary"},"Scan QR")))},e.handleError=function(e){console.error(e)},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderForm(),this.renderScan(),this.renderSubmit(),this.renderError(),this.renderSendButton(),this.renderReader())}}]),n}(a.Component);var Be=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{path:"/dashboard",component:oe}),r.a.createElement(p.a,{path:"/account",component:Ce}),r.a.createElement(p.a,{path:"/send",component:Re}),r.a.createElement(p.a,{path:"/wallet",component:je}),r.a.createElement("div",{className:"bottomBar"},r.a.createElement(re,null)))}}]),n}(r.a.Component),De=new m.a,Pe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={verification:!1},e.componentDidMount=function(){if(!De.get("exp_session")&&"/resetPassword"!=e.props.location.pathname&&"/auth/verify"!=e.props.location.pathname)return e.props.history.replace("/login");De.get("exp_session")&&fetch("/auth/checkAuth").then((function(e){return e.json()})).then((function(t){return"failed"==t.auth?e.props.history.replace("/login"):e.props.history.replace("/dashboard")})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(g,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/auth/verify",component:M}),r.a.createElement(p.a,{exact:!0,path:"/resetPassword",component:W}),r.a.createElement(p.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(I,Object.assign({},e,{handleAuth:function(e){}}))}}),r.a.createElement(p.a,{exact:!0,path:"/register",component:F}),r.a.createElement(p.a,{exact:!0,path:"/forgotPassword",component:J}),r.a.createElement(Be,null)))}}]),n}(r.a.Component),Le=Object(p.f)(Pe),Ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(c.a,null,r.a.createElement(Le,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ae?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ne(t,e)}))}}()}},[[112,1,2]]]);
//# sourceMappingURL=main.ac6e2ef0.chunk.js.map